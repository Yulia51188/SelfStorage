# Сервис SelfStorage

Телеграмм-бот для бронирования физическими лицами складских ячеек и площадей для хранения сезонных и других вещей.

## Запуск и настройка

- Скачайте код
- Настройте окружение. Для этого выполните следующие действия:
    - установите Python3.6+;
    - создайте виртуальное окружение [virtualenv/venv](https://docs.python.org/3/library/venv.html) для изоляции проекта.
    - активируйте виртуальное окружение:
  
    ```
    . ./env/bin/activate
    ```
    - установите необходимые зависимости:

    ```
    pip install -r requirements.txt
    ```
- В корневой директории создайте файл ```.env```.
- Создайте бота в приложении Telegram с помощью ```@BotFather```. Сохраните полученный секретный ключ в переменной ```TG_TOKEN``` в файле ```.env``` как в примере ниже:

```TG_TOKEN=0123456789:ABCDEF12345_ABCDEabcde1234567890_Ab```
- Создайте базу данных Redis на сайте [app.redislabs.com](https://app.redislabs.com/) (можно использовать локальный сервер Redis и порт по умолчанию 6379). Сохраните ip-адрес, порт и пароль от базы данных в соответствующих переменных окружения в файле ```.env```:

```
DB_HOST=88.88.88.88
DB_PORT=11111
DB_PASSWORD=ABCDEFGijklmnopqrstuvwxyz1234567
```
- Подключите оплату заказов, например, через Сбербанк с помощью ```@BotFather```:
    - введите команду /mybots
    - выберите нужного бота
    - выберите пункт Payments
    - выберите Сбербанк
    - выберите коннект Сбербанк Test
    - следуйте инструкциям пока не получите данные тестовых карт, например:
        
        ```
        VISA: 4111 1111 1111 1111, 2024/12, CVC 123, проверочный код: 12345678
        ```
    - снова обратитесь через ```@BotFather``` к пункту Payments вашего бота для получения ключа для тестовой оплаты:
        
        ```
        1 method connected:
        Сбербанк Test: 123456789:TEST:1234de56-a123-3456-ab1a-12aa345bb678
        ```
    - сохраните ключ в переменной окружения в файле ```.env```:

    ```PROVIDER_TOKEN=123456789:TEST:1234de56-a123-3456-ab1a-12aa345bb678```
- Запустите скрипт ```test_data.py``` для загрузки тестовых данных в базу данных и для тестирования работы с базой данных:

    ```
    python test_data.py
     ```
- Запустите бота командой:

     ```
    python tg_bot.py
    ```
## Инструкция по использованию

- перейдите в чат вашего бота в приложении Telegram;
- для запуска процесса бронирования введите команду /start;
- выберите удобный склад из предложенных вариантов;
- выберите либо "сезонные вещи", либо "другое";
- выберите нужное из доступных опций;
- проверьте параметры бронирования;
- если все устраивает нажмите "Забронировать", иначе "Отмена" и повторите цепочку шагов, начиная с выбора склада;
- после подтверждения бронирования введите свои данные;
- далее станет доступна оплата;
- введите тестовые данные, полученные ранее;
- после оплаты можно получить QR-код с указанным сроком действия для доступа на склад;
- для получения списка всех ваших бронирований введите команду /bookings.

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).
